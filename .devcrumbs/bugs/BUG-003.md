# Menu Items Missing Visual Checkmarks

## Problem
View mode menu items (List/Tree, Sort options, Hide Done toggle) don't show checkmarks to indicate current selection, unlike VS Code's built-in menus (e.g., Source Control view options).

## Root Cause
VS Code extension API doesn't natively support "checked" menu items (GitHub issue #109306).

## Solution - Use Context Keys + When Clauses
Implement workaround pattern used by VS Code internally:

1. **Store state in context keys** using `vscode.commands.executeCommand('setContext', 'key', value)`
2. **Create separate menu items** for each state (checked/unchecked)
3. **Use when clauses** to show only the appropriate item based on context

## Implementation Steps

### 1. Define Context Keys (package.json)
```json
// Not in package.json, but document them:
// - devcrumbs.viewMode (values: "flat" | "hierarchical")
// - devcrumbs.hideDone (values: true | false)
// - devcrumbs.hierarchyType (values: "scrum" | "waterfall" | "both")
// - devcrumbs.sortBy (values: "name" | "path" | "status")
```

### 2. Update Commands (commands/index.ts)
Set context after each state change:
```typescript
// Example for view mode
vscode.commands.executeCommand('setContext', 'devcrumbs.viewMode', 'flat');
```

### 3. Duplicate Menu Items with When Clauses (package.json)
```json
{
  "command": "devcrumbs.viewMode.flat",
  "when": "view == devcrumbs.itemsView && devcrumbs.viewMode == 'hierarchical'",
  "group": "1_view"
},
{
  "command": "devcrumbs.viewMode.hierarchical", 
  "when": "view == devcrumbs.itemsView && devcrumbs.viewMode == 'flat'",
  "group": "1_view"
}
```

### 4. Add Checkmark to Labels
Use Unicode checkmark in command titles:
```json
{
  "command": "devcrumbs.viewMode.flat.active",
  "title": "âœ“ View as List"
},
{
  "command": "devcrumbs.viewMode.flat.inactive",
  "title": "View as List"
}
```

## Affected Commands
- View Mode: flat/hierarchical
- Hierarchy Type: scrum/waterfall/both
- Sort: by name/path/status
- Hide Done toggle

## References
- [VS Code issue #109306](https://github.com/microsoft/vscode/issues/109306)
- [setContext command docs](https://code.visualstudio.com/api/extension-guides/command#using-commands)
