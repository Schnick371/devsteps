# TreeView Hierarchical Mode Fixed

## Changes Made

### 1. Added `loadItemWithLinks()` Helper Function
- Loads full item data from individual JSON files
- Includes `linked_items` field needed for hierarchical display
- Parses item ID to determine type folder
- Returns `WorkItem | null`

### 2. Fixed `HierarchyRootNode.getChildren()`
- Changed from loading items from index to loading full JSON files
- Filters top-level items (Epics/Requirements) from index
- Loads each item's full data using `loadItemWithLinks()`
- Creates WorkItemNode with complete `linked_items`

### 3. Fixed `WorkItemNode.getChildren()`
- Removed index.json dependency for child loading
- Directly reads child IDs from `this.item.linked_items['implemented-by']`
- Loads each child's full data using `loadItemWithLinks()`
- Creates child WorkItemNode instances with hierarchical=true

## Technical Details

**Before:**
- TreeView tried to read `linked_items` from minimal index → undefined
- Used wrong access pattern `index.items[childId]` (array vs object)
- Could not display Epic → Story → Task hierarchies

**After:**
- Index remains minimal (no `linked_items`) ✅
- Hierarchical mode loads full JSON files on-demand ✅
- Lazy loading (only when expanding nodes) ✅
- Flat view unaffected (still uses index) ✅

## Files Modified
- `packages/vscode-extension/src/treeView/devcrumbsTreeDataProvider.ts` (+73 lines)

## Testing
1. Reload VS Code window
2. Open DevCrumbs TreeView
3. Switch to Hierarchical View
4. Expand Epic nodes → Should show Story children
5. Expand Story nodes → Should show Task children

## Performance
- Bundle size: 323.8kb → 324.3kb (+0.5kb)
- Lazy loading ensures no performance degradation
- Only loads full items when user expands nodes