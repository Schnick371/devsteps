# Restore Original Badge Implementation - FileDecorationProvider WITH resourceUri

## Discovery from Git History
Found original implementation in commit 1c935b4 (initial setup). The CORRECT approach uses BOTH:
1. **TreeItem.resourceUri** - Links item to FileDecorationProvider
2. **FileDecorationProvider** - Renders colored badge in separate column (wie im File Explorer!)

## Original Working Implementation

### workItemNode.ts (commit 1c935b4):
```typescript
treeItem.description = this.item.status;  // Text description
treeItem.resourceUri = createItemUri(this.item.id, this.item.status, this.item.priority);  // Badge provider
```

### decorationProvider.ts (commit 1c935b4):
- Returns `{ badge: 'â—‹', color: ThemeColor, tooltip: '...' }`
- Uses custom scheme `devsteps://item/<ID>?status=X&priority=Y`
- Colored badges in separate column!

### extension.ts (commit 1c935b4):
```typescript
const decorationProvider = new DevStepsDecorationProvider();
context.subscriptions.push(
  vscode.window.registerFileDecorationProvider(decorationProvider)
);
```

## What Got Broken
- TASK-075 removed `resourceUri` assignment
- Changed to `description = getStatusBadge()` (text only)
- Lost the colored badge column visualization!

## Correct Fix
1. **RESTORE resourceUri** in workItemNode.ts
2. **KEEP decorationProvider** registration in extension.ts  
3. **ADD decoration refresh** when tree updates (BUG-016 was partially right!)
4. **SET description to status text** (not badge character)

## Implementation
```typescript
// workItemNode.ts
treeItem.description = this.item.status;  // or undefined for cleaner look
treeItem.resourceUri = createItemUri(this.item.id, this.item.status, this.item.priority);

// devstepsTreeDataProvider.ts  
refresh(): void {
  this._onDidChangeTreeData.fire();
  this.decorationProvider?.refresh();  // Refresh badges!
}

// extension.ts
const decorationProvider = new DevStepsDecorationProvider();
context.subscriptions.push(
  vscode.window.registerFileDecorationProvider(decorationProvider)
);
treeDataProvider.setDecorationProvider(decorationProvider);
```

## Why This Works
- FileDecorationProvider DOES work for custom TreeViews when resourceUri is set!
- Badges appear in separate column with colors (charts.green, charts.red, etc.)
- Original implementation was correct from day 1!

## Files to Change
- `workItemNode.ts` - Restore resourceUri, set description to status text
- `devstepsTreeDataProvider.ts` - Add decorationProvider refresh (from BUG-016)
- `extension.ts` - Connect providers (from BUG-016)
- `decorationProvider.ts` - Already correct!

## Evidence
- Original commit 1c935b4 had this working
- Stack Overflow: FileDecorationProvider CAN work with custom scheme
- VS Code API: resourceUri triggers FileDecorationProvider