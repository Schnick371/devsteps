# Bug: purgeItems() reads legacy index.json

## Problem

`purgeItems()` in `packages/shared/src/core/archive.ts` (line 86) hardcodes a read from `index.json`:

```typescript
const indexPath = join(devstepsDir, 'index.json');
const index: DevStepsIndex = JSON.parse(readFileSync(indexPath, 'utf-8'));
```

The current index format was migrated to a **directory-based refs-style index** (`.devsteps/index/by-type/`, `by-status/`, `by-priority/`). The flat `index.json` file **no longer exists** in current projects.

## Impact

- `mcp_devsteps_purge` → always fails with `ENOENT: no such file or directory, open '.devsteps/index.json'`
- `devsteps purge` CLI → same failure (both call `purgeItems()` from shared)
- Bulk archival of done/cancelled items is completely broken
- Workaround (individual `devsteps archive` / `mcp_devsteps_archive` calls) works but is manual/tedious

## Root Cause

`purgeItems()` was not updated when the index was migrated from flat `index.json` to directory-based structure. `archiveItem()` (single-item) correctly uses `removeItemFromIndex()` from `index-refs.ts`, but `purgeItems()` still reads items via the legacy path.

## Fix Location

`packages/shared/src/core/archive.ts` — the `purgeItems()` function

Replace:
```typescript
const indexPath = join(devstepsDir, 'index.json');
const index: DevStepsIndex = JSON.parse(readFileSync(indexPath, 'utf-8'));
let itemsToArchive = [...index.items];
const statusFilter = args.status || ['done', 'cancelled'];
itemsToArchive = itemsToArchive.filter((i) => statusFilter.includes(i.status));
```

With: call to `listItems()` which handles both legacy and refs-style index correctly.

## Acceptance Criteria

- [ ] `devsteps purge` archives done/cancelled items on refs-style projects
- [ ] `mcp_devsteps_purge` works without ENOENT error
- [ ] Both `status` and `type` filters work correctly
- [ ] `olderThan` date filter preserved
- [ ] 100+ archived done/obsolete stories in this project can be purged successfully
- [ ] Unit tests updated/added for purgeItems()