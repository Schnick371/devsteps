# Bug: Missing Error Handling in Async Methods

## Problem
**INSUFFICIENT ERROR HANDLING** - Multiple async methods lack try-catch blocks:

### Extension Activation
```typescript
// extension.ts:127
export function activate(context: vscode.ExtensionContext) {
  const workspaceFolders = vscode.workspace.workspaceFolders;
  const workspaceRoot = workspaceFolders?.[0].uri;
  
  // ❌ No try-catch around fs.stat() call
  vscode.workspace.fs.stat(devstepsPath).then(
    () => { /* initialize */ },
    () => { /* show welcome */ }
  );
}
```

### TreeView Data Loading
```typescript
// devstepsTreeDataProvider.ts:35-70
async function loadItemWithLinks(workspaceRoot: vscode.Uri, itemId: string): Promise<WorkItem | null> {
  try {
    // ... parsing logic ...
    const itemData = await vscode.workspace.fs.readFile(itemPath); // ❌ Could throw
    return JSON.parse(Buffer.from(itemData).toString('utf-8')); // ❌ Could throw on invalid JSON
  } catch (error) {
    console.error(`Failed to load item ${itemId}:`, error); // ✅ Logs but doesn't notify user
    return null;
  }
}
```

### Dashboard Data Aggregation
```typescript
// dashboardPanel.ts:85-95
private async loadAllData(): Promise<{ allItems: any[]; tasks: any[] }> {
  const workspaceFolders = vscode.workspace.workspaceFolders;
  const workspaceRoot = workspaceFolders?.[0].uri.fsPath;
  
  const allItems = await listItems({ path: workspaceRoot }); // ❌ No try-catch
  // If listItems() throws, entire dashboard breaks
  
  return { allItems, tasks };
}
```

## Impact
- **Silent Failures**: Errors logged to console but user sees nothing
- **Broken UI**: Dashboard shows blank when data loading fails
- **Poor UX**: No feedback when .devsteps directory is corrupted
- **Debugging Difficulty**: Users can't report errors without opening Dev Tools

## Proposed Solution

### 1. Add User-Facing Error Notifications
```typescript
try {
  const items = await listItems({ path: workspaceRoot });
} catch (error) {
  vscode.window.showErrorMessage(
    `DevSteps: Failed to load items - ${error.message}`,
    'Open Logs'
  ).then(selection => {
    if (selection === 'Open Logs') {
      outputChannel.show();
    }
  });
  return []; // Graceful fallback
}
```

### 2. Validate Data Before Parsing
```typescript
try {
  const itemData = await vscode.workspace.fs.readFile(itemPath);
  const parsed = JSON.parse(Buffer.from(itemData).toString('utf-8'));
  
  // Validate schema
  if (!parsed.id || !parsed.type) {
    throw new Error(`Invalid item schema: ${itemId}`);
  }
  
  return parsed;
} catch (error) {
  // Log + notify
  outputChannel.appendLine(`❌ ${itemId}: ${error}`);
  vscode.window.showWarningMessage(`Skipped corrupted item: ${itemId}`);
  return null;
}
```

### 3. Dashboard Fallback UI
```typescript
private async _update() {
  try {
    const data = await this.loadAllData();
    this._panel.webview.html = this._getHtmlForWebview(...);
  } catch (error) {
    // Show error UI instead of blank screen
    this._panel.webview.html = this._getErrorHtml(error);
  }
}
```

## Acceptance Criteria
- [ ] All async methods have try-catch
- [ ] User sees error notifications (not just console logs)
- [ ] Dashboard shows error UI on data loading failure
- [ ] Extension activation handles missing .devsteps gracefully
- [ ] Output channel logs all errors for debugging
- [ ] Invalid JSON files don't crash TreeView

## References
- Current implementation: Console logs only (silent failures)
- devsteps-code-standards.instructions.md: "Add guards for new code paths"
